---
layout:     post
title:      "地理知识图谱「 2 」"
subtitle:   "地理定位(GeoReferencing)技术概述"
date:       2020-05-27 10:00:00
author:     "西山晴雪"
header-img: "img/post-bg-android.jpg"
categories: Geographic Knowledge Graph
tags:
    - 地理知识图谱
    - 地理信息抽取
    - 地理定位
    - GeoReferencing
    - GeoParsing
    - GeoCoding       
    - 地名解析
    - 地名识别
    - 地理编码
---



# 地理定位（GeoReferencing）技术概述

摘要：

根据前文介绍，地理信息抽取是构建地理知识图谱的核心，而对文本的地理定位是地理信息抽取的核心。本文对地理定位的当前研究现状进行了梳理。鉴于国内地理信息科学和计算机科学为两个学科，而地理定位属于跨学科、研究难度偏大的命题，国内比较深度或成体系的研究较少，因此本文主要针对国际相关研究情况。

## 1. 文本中的地理引用	

- **地理引用（Geoeferences）**
  - 文本中对位置的指称（形式上为文本片段）被称为地理引用，也称**位置引用**、**位置标识**、**地理标签**。

- **地理引用的案例：**地理引用的形式多样，例如，以下形式都可以定位北京大学：

  - 北京市海淀区颐和园路5号 -- 北京大学的通信地址
  - 北京大学  --  北京大学的地名
  - 100871 -- 北京大学的中国邮政编码
  - X8P4+Q8   --  北京大学的谷歌开放位置码
  - 39.986913,116.3036799 -- 北京大学的经纬度

  - 此外，还有很多在专业领域编制的具有空间位置含义的编码，如：北京大学的不动产单元登记码、北京大学的城市管理网格码等，均可以纳入地理引用的范围。

- **人们总是期望地理引用具有如下属性：**
  - 明确性 ----  在某个给定的参考框架内，地理引用只专指一个位置，但地名等很难做到
  - 共知性  ---- 地理引用应当在使用它们的人之间能够共享，且他们清楚其地理含义
  - 时间不变性 ---- 地理引用应尽可能在时间上保持不变，但事实上，地名、行政区划等经常变化
  - 此外，地理引用通常与隐式的粒度相关，例如：偏远村庄的通信地址显然会采用比1米精度更粗的粒度

## 2.  文本的地理定位

- **地理定位（GeoReferencing）**
  - 将文本中的地理引用转换为物理空间中的某个位置（如：经纬度坐标）的任务，被成为地理定位
  - 地理定位将文本片段形式的地理引用，转换为特定物理空间中的位置，使其成为计算机能够识别的坐标值或空间实体，从而赋予了其地理语义
  - 识别文本中的地理引用有助于理解该文本的地理上下文，进而区分其与文本核心主题之间的关联度
- 地理信息抽取任务中：
  - 地理定位的起点是自然语言文本形式的文档或文本
    - 包含经度/纬度坐标、地名、地理区域（如国家）等各种形式的地理引用
  - 地理定位的终点是给出其在物理空间中的坐标值
  - 地理信息抽取追求的是自动执行该任务，这也是GIR的核心挑战
  - 目前大多数GIR聚焦在地名引用和地址引用的地理定位问题上，尽管地理引用的类型非常多
- **地理定位的过程**
  - **地理解析（GeoParsing）：**识别文本中地理引用的过程，可以理解为从文本中识别出地理引用的过程；
  - **地理编码（GeoCoding）：**解析地理引用的过程，可以理解为将上述地理引用解释为点、线、面等空间对象实体的过程，显然包含两个子过程
    - 获取地理引用所对应地理实体的唯一标识符
    - 根据地理实体唯一标识符获取其空间几何描述
  - **文档范围的地理定位**：
    - 上述工作面向文档级别的地理定位问题
    - 在其基础上，有学者研究文档中不同范围（如：段落）的地理定位问题

## 3. 地理解析技术概况

### 3.1 地理解析任务解释		

​		地理定位的基本任务是确定候选的地理引用。对于地名而言，也被称为地名解析或地名识别。该任务与信息提取领域的命名实体识别（NER）相当，即为文本中的每个单词或单词组分配一组预定义的类别或实体的过程，类比包括位置、人员或组织的名称、时间、日期和货币金额的数字表达式等。相对而言，地理解析任务的输出为供后期地理编码所用的候选地引用列表。

<img src="https://raw.githubusercontent.com/shilang1220/imageBed/master/img/%E5%91%BD%E5%90%8D%E5%AE%9E%E4%BD%93%E8%AF%86%E5%88%AB%E6%A1%88%E4%BE%8B.jpg" style="zoom:67%;" />



​		例如：上表中的文本显示了命名实体识别系统的典型输出（其中：org指组织，loc之位置）。大多数NER系统都是由分词、词性标注、实体匹配等构成的处理管道。

​		在NER中，以前许多工作都是提取相当粗粒度的实体，目前更详细位置的实体识别研究也越来越广泛（Uryupina，2003；Axelrod，2003）。地名识别还可能涉及赋予指示地方类型的信息（例如：城市或城镇）。在地名识别中还必须处理和解决语义上的歧义。例如：“仙人指”指的是一个神仙的指头，还是一个地点。此类问题中同一个名称可能属于多个不同于地名的类别，通常也被称为参考类歧义或地理/非地理歧义（Amitay等人，2004）。

### 3.2 地理解析的基本做法

- 目前存在多种识别文本中潜在命名实体的方法，但无论何种方法，大多数都将已知地名词典（Hill，2000））、组织和人员列表与机器学习技术结合起来，或者与利用周围环境要素构建的规则结合起来
- 构建既全面（包含文件中提及的所有相关地名）又准确（不包含相同地名的副本，拼写或坐标略有变化）的地名辞典是一项基础性且具有挑战性的任务（Sehgal等人，2006年；Martins，2011年；Recchia和Louwerse，2013年）
- 建立高质量的地名辞典越来越多地与合并多个来源地名辞典数据联系在一起，这本身是一项非常重要的任务（Manguinhas等人，2008年；Smart等人，2010年）
- 自然语言中的地名用法不限于官方或行政用途，因此，地名辞典还应包含当地地名（民间地名）及其空间足迹（Keßler等人，2009年；Jones等人，2008年）

### 3.3 地理解析的主要方法类型

​		识别候选地理引用主要有三种方法（Leidner和Lieberman，2011）：

- 简单列表查找
- 基于知识或规则的方法
- 机器学习

### 3.4 基于列表查找的地理解析法

用于识别地理引用的基线方法是从事先生成的地名、地址、邮政编码、电话号码等列表中查找已知的实体。该方法简单、快速、独立于语言，并已成功用于识别一系列文本中的位置引用。例如，Mikheev等人（1999）研究表明，通过从中央情报局的世界概览中收集5000个位置，并根据MUC-7数据进行评估，简单的位置列表查找性能可以达到90-94%的准确率，75-85%的召回率。他们强调，已知列表的质量比其规模影响更大。

 然而，该方法有许多缺点：

- 无法确定在地名辞典中没有的新实体
- 必须人工决定如何与清单中的条目匹配（例如：允许部分匹配还是坚持完全匹配）
- 无法保证某个词在文本中总是表示地理语义（例如：芝加哥可代表美国城市、流行音乐团体名称）；
- 地理引用通常以不同的形式出现，列表中必须同时包含其所有名称变种才能提高识别精度

### 3.5 基于知识或规则的地理解析法

更有效的方法是利用上下文环境。例如：在句子“Keep up on your reading with audio books”中，使用地名辞典的方法可能会将“on”、“reading”和“books”错误地分别识别为越南、英国和美国路易斯安那州的位置。然而，实际上这些条目显然没有地理意义，此时利用周围的上下文，会显著提高识别精度。

捕获上下文通常利用规则方法实现，即用语法来定义和表达上下文关系。此时，上下文中用于支撑地理引用的内容，被成为证据：

- **内部证据：**
  - 文本中通常有某种内在的结构或短语可以表明它们是地名，此类特征包括大写、前缀或后缀（如：公司标志）、地名列表等
  - 例如：一个位置的内部证据可能被定义为：“CapWord + { Street，Boulevard，Avenue，Crescent，Road }”，利用该规则可以捕获“Portobello Street”和“Sunset Boulevard”等地名

- **外部证据：**
  - 文本中可能存在上下文证据能够表明单词或短语是什么类型的实体
    - 例如：“President Washington chopped the tree”，“President”是明确的外部证据，表明“Washington”是一个人的名字，而不是一个地方
  - 可以建立上下文规则来帮助区分命名实体的类别，例如：
    - “North of CapWord”通常有助于识别一个地方
    - “Firstname + Location”，其中Firstname与常用人名列表相匹配，而Location与地名录匹配，符合这种规则的Location，可以被推断为是没有地理意义的Location。
- 规则实现方法：
  - 通过定义封装规则的正则表达式，采用文本匹配方式执行
  - 常见基于正则表达式的模式匹配工具包括：lex、flex、fgrep等

### 3.6 基于机器学习的地理解析法

​			在旧的NER系统中，规则通常是手工创建的；然而，大多数现代方法使用机器学习方法从以前的已分类（或标注）训练集中捕获上下文信息特征，进而实现自动归纳规则；训练后的模型可以用来分类新地名。

- 机器学习方法包括：隐马尔可夫模型、决策树、最大熵等
- Curran和Clark（2003）使用了最大熵来标记来独立于语言的特征，包括：词性、前后命名实体列表、单词是否为名字或姓氏等。根据CoNLL2003 NE任务的数据，Curran和Clark的F1分数分别为87.7%（英语）、71%（德语）和83.2%（荷兰语）

机器学习方法的两个问题是：

- 训练数据问题
- 分类器的泛化能力问题

### 3.7 半结构化数据的地理解析	

​		许多研究者还讨论了半结构化web内容的地理定位问题（McCurley，2001；Borges et al.，2003；Morimoto et al.，2003）。例如：

- Borges等人2003年使用Wrapper归纳法从网页中提取地址
- Wrapper是一种严重依赖于文档格式和标记语言来归纳IE模式的系统
- 带有用户标注的地名样本页面被用于创建通用包装器，其方法是根据网页结构和围绕地名的HTML标记生成模式，并导出一组正则表达式，用于对其他网页进行地名提取
- 这种形式的规则泛化（本质上是一种提取规则，不依赖于地名本身，仅依赖于地名上下文的结构和格式）被成功地用于从同一个网站的65个网页中提取酒店、餐厅、酒吧、博物馆和其他文化景点信息



## 4. 地理编码技术概况

确定了候选地理引用后，后续任务是在地理知识库（例如：地名词典或本体）的上下文中，将其与唯一的、有意义的、可与某个度量参考空间相关联的标识符相关联。（Buscaldi，2011年； Leidner，2008年； Leidner和Lieberman，2011年； Andogah等人，2012年）。 例如：可以为英国西南部的地名“Bath”分配地理坐标（51.3794N，-2.3656W）。

### 4.1 地理编码面临的问题

对地名进行地理编码的常见问题是：

（1）所标识的地名可能指向地名词典中具有相同名称的多个位置之一（引用歧义或地理歧义）

 例如：名称“ Chapeltown”是指，

- 南约克郡（英国）
- 兰开夏郡（英国）
- 肯特县（美国）
- 帕诺拉县（美国）中的位置 

（2）不同（或替代）地名可能用于引用相同的位置。例如：

-  “London”和“Londres”都为伦敦

- 非正式地名或民间地名，例如“NewYork”也可以称为“Big Apple”

### 4.2 地理编码的主要技术方法

地理编码（又称地名解析或引用去模糊）的方法有很多种，其目标是为每个歧义地名从一组候选位置中选择一个最匹配的位置。 许多方法依赖于使用外部资源（例如：地名词典）在地理引用和空间坐标之间进行映射，或者使用启发式和手工构建规则的方法。 

启发式方法通常利用与位置相关的其他知识（例如：人口统计、土地表面积、对地点类型的偏好（城市优先于村庄）或部分关系）来解决歧义。 其他启发式方法也采用已知语言或地理属性的形式。 例如：“单一地理参考文档”属性明确在整个文本中引用的地名位置保持不变（Leidner，2008年）。 这和自然语言处理中的“单一词义歧义消除方法”类似（Gale等，1992）。另一个常用地理属性是托伯勒定律（Tobler，1970），即相互靠近的事物之间的联系相较于不靠近的事物而言，联系更为密切。基于启发式的方法通常简单、高效，并且在多个领域中执行得很好（Leidner，2008年）。

Buscaldi于2011年将地名消歧方法分为三大类：

- 基于规则和知识的方法：利用外部知识资源寻找歧义线索的人，例如人口统计；
- 基于机器学习的方法：利用数据驱动或监督数据；
- 基于地图的方法：涉及计算空间距离的方法。

### 4.3 基于规则和知识的方法

考虑下表中来自Wikipedia的伦敦（英国）和伦敦（加拿大）的示例。 假设在地理解析阶段，“伦敦”已被确定为地点； 下一步是使用地理资源（地名词典或本体）将其置于物理空间中。 例如：获得对GeoNames全球地理数据库的访问权限，然后将伦敦查找为居住地，结果会发现67个可能的位置，包括：英国的伦敦、加拿大的伦敦、美国的几次伦敦事件等。

 一种简单的方法是根据外部世界知识为模棱两可的位置指定默认位置，例如：最常见的位置人口（Andogah等，2012） 。 许多地理资源（如：GeoNames）都包含有关位置的其他信息；因此，在下表中的第一个示例中，GeoNames中人口最多的伦敦将是正确的“伦敦”-英国伦敦。事实证明，基于默认的方法可以很好地工作（Li等，2003）。 但如果在第二个示例中应用简单的默认方法，无论上下文如何都将相同的地名引用解析为相同的位置，则地理编码是错误的。通常情况下，当所有其他消除地名歧义的方法都失败时，才会使用默认的意义启发法。

地理编码的许多方法都使用了上下文线索，证据的一个来源是同一文本段（例如：段落）中或整个文档中提到的其他地名。 例如：在第一个示例中出现“英格兰”或在第二个示例中出现“安大略”和Londun是包含关系。 这样的信息通常在地名词典中能够找到（例如：地名词库TGN）相关层次结构的信息。例如： 世界>欧洲>英国>英格兰>大伦敦>伦敦和世界>北美和中美洲>加拿大>安大略省>伦敦。 可以基于层次结构中的单词与歧义地名前后的单词之间做文本相似性分析或根据某种距离度量（如：本体距离）来进行有效区分。（Amitay等  ，2004）。

### 4.4 基于机器学习的方法

包含关系的使用是基于知识的方法的一个示例（Buscaldi，2011年）。 但仅依赖于本地或文档上下文中的地名也存在问题，即此类名称的出现可能不足以成功消除歧义。 一种替代方法是在地名的本地上下文中同时考虑非地理名称（Overell和Rüger，2008年）。

Speriosu和Baldridge（2013年）使用带有地理标签的Wikipedia文章训练了一种监督学习算法，使用周围文档中的所有单词进行消歧。 该想法基于这样的假设：即特定的非地理单词通常会在特定位置的上下文中出现。 例如，在有关波特兰的文字中，“龙虾”一词将间接暗示缅因州的波特兰，而不是俄勒冈州或密歇根州。 该论文表明在消除地名歧义的直接上下文中，学习那些与特定地名实例相关的词，可以获得一些最有效的地名解析结果。因此，当消除歧义地名时，可以将待判别的地理引用其上下文词与该地名在地名辞典中所有实例先前生成的语言模型进行匹配。 这是Buscaldi在2011年所称的数据驱动方法的示例，该方法将上下文线索作为特征捕获，并将问题视为监督学习或分类任务。

### 4.5 基于地图的方法

另一种方法是利用空间关系，而不是仅基于文本上下文关系（Buscaldi，2011年将其归类为基于地图的方法）。与基于文本上下文的方法相比，该方法使用出现在歧义地名上下文中的地点坐标来进行歧义消除。 其假设是文档中的位置在空间上是自相关的，因此正确的位置将使与歧义对象之间的距离最小化（Smith和Crane，2001年）。 例如：莱德纳（Leidner，2008）为歧义名称的所有候选位置计算距离，并使用空间最小度量选择最接近的位置。
   	在上表的第二个示例中，伦敦的平均位置将在空间上更接近“西南安大略”、“魁北克市-温莎走廊”、“多伦多”、“安大略省”、“底特律”和“密歇根州” ，因此可将其判别为加拿大的伦敦。明确地名的实例特别有效，它提供了更强力的证据来证明歧义地名（Li等人，2003； Rauch等人，2003）。Speriosu和Baldridge于2013年进行的实验结果表明，基于文本上下文和最小距离数据驱动驱动的方法优于基于随机地名选择方法。

### 4.6 其他问题

- 非点状要素的地理编码问题

根据表中示例，需要考虑的另外一个问题是：如何为无法分配点坐标的要素（例如：泰晤士河）或历史地名作地理编码。 例如：Smith and Mann在2003年表明，与当前的新闻报道相比，历史文档的地理编码成功率要低得多。 

- 精细粒度地名的地理编码问题

在更精细粒度下进行地理编码时，还会遇到其他挑战。 例如：Pasley等人2007年表明，与区域和城市水平的数据相比，街道水平的数据显示出更高的歧义度。

- 地名辞典的问题

 在实践中，利用多种地理资源更有可能提高消除歧义的能力，因此，在作地理编码之前，有必要另外汇总（例如：基于坐标的相似性以及名称和要素类型）或选择合适的资源（Smart等人，2010年）。  Clough于2005年描述了一种方法，与特定国家/地区的地名进行歧义消除相比，使用全球覆盖但质量参差不齐的资源（例如GeoNames）效果要差很多。（Graham和De Sabbata，2015年； Ahlers，2013年）。



## 5. 文本地理范围的解析

Andogah等人（2012年）将文档的地理范围定义为“文档所涉及的地理区域或面积”。 地理范围解析的过程是将地理范围自动分配给文档。 其基于这样的直觉：与更一般的文档相比，许多文档可能与特定区域内的人们相关。 例如：英国广播公司（BBC）有关英国的新闻页面与来自英国而不是全世界的人相关性更高。  讨论地理范围的最早论文之一是Ding等人（Ding等，2000年），他计算了Web资源（例如网页）的地理范围，以确定目标受众（如：某个城市、国家或世界的居民）。
      Wang等于2005进一步将网络资源的位置分为三类：

- 提供者位置
  -  提供者位置描述了拥有网络资源的提供商（例如组织或个人）的物理位置，例如，从特定区域内的黄页中识别服务提供商（Himmelstein，2005）
- 内容位置
  - 内容位置描述了Web资源的内容所在的位置
- 服务位置
  - 服务位置描述了Web资源到达的地理范围。 例如，谢菲尔德市议会提供的有关缴纳议会税的信息可能仅与谢菲尔德居民有关； 英国政府网站上有关签证的信息将在全球范围内推广。

 但实际上，许多应用程序只是简单地根据主要位置或文档中所有位置的加权平均值来定义文档地理范围。计算地理范围通常基于对文档中标识的位置进行排名和选择，例如：出现频次最多的地理引用。 许多示例系统涉及确定适当文档范围的过程，包括Web-a-Where，NewsStand和STEWARD。

## 6. 基于语言模型的隐性位置建模

与显式坐标相关的各种资源的不同，机器学习方法的日趋成熟以及对更通用方法的需求在大数据时代催生了一种新的方法系列。其不是探索文本中明确包含的地名，而是寻求学习在文本中更泛化的位置描述方式。 关键思路在于：给定与坐标相关联的大量文档（例如：带有地理标签的Flickr标题，Wikipedia 或Tweets等），可以识别与特定空间区域相关联的单词集。 给定区域的单词频率集称为语言模型。

最早采用这种想法的例子是Ahern等人（Ahern等，2007），他结合使用k-means聚类和对tf - idf的修正，从Flickr标签中选择重要的关键词，然后将其分配给单元粒度不同的纬度/经度网格，从而形成浏览系统的基础。该浏览系统用于对地理上特定概念（由语言模型识别）和相关照片进行地理探索。 		其他早期应用程序则涉及对没有坐标的Flickr图像进行地理配准。其主要思想是使照片的标签与最相似的语言模型匹配，从而与地理位置匹配，并采用朴素贝叶斯机器学习方法完成。Crandall等人于2009年采用了基于均值漂移聚类的空间细分方法，并使用贝叶斯和支持向量机机器学习方法，使用文本标签和SIFT视觉特征。

O’Hare和Murdock，2013年解决了使用贝叶斯方法对Flickr照片进行地理编码的相同问题，仅使用文本证据来证明与多个尺度的常规网格单元相关的语言模型。 在如何分配照片所在单元格的问题，也使用了与目标单元格相邻的网格单元格语言模型。 

 Kinsella等人（2011年）使用语言建模方法来定位推文及其用户，并尝试使用K-L散度和贝叶斯概率将推文与位置进行匹配。 他们发现，在最好的粒度级别上，语言模型明显优于基于地名词典的地理编码方法，这显然是由于用户在推文中包含本地化地名的可能性较高。

Wing和Baldridge，2011年，将语言模型方法应用到Wikipedia上。他们基于地理标签和落在1度地理网格单元中的文档，通过计算基于文档的语言模型和基于单元的语言模型之间的K-L散度来估计该单元的语言模型。同时他们还研究了利用贝叶斯方法为单元语言模型建模。

Roller等人（2012年）进一步开发了该方法，采用聚类方法提供不同大小的网格单元，并通过修改最终匹配步骤，将网格定位点确定为训练集中Wikipedia文章坐标的质心，而非单元格的几何中心。

Laere等人，2014年，对Flickr，Twitter和Wikipedia使用k-medoid聚类创建更丰富的语言模型。他们在训练数据中对经过地理编码的资源进行了筛选，最终对Wikipedia文章的地理编码结果有了显著改善。并且，在Wikipedia文章的地理编码中，“点”相关的位置（如建筑物）的地理编码结果，比空间上更宽泛的对象（如河流）质量更高。
   	对上述方法的典型评估办法是使用具有已知位置的资源测试数据集，并测量地理编码文档到其实际位置的平均距离和中值距离。Melo和Martins在2017年的最新评论中报告了多种方法的结果，其中英语Twitter和Wikipedia数据集的中位数范围为2.2-640 km，平均值在83-2854 km之间。 显然，这些结果是粗粒度的，尽管它们显示出很好的潜力，并且具有一些非常好的结果，但是在撰写本文时，它们似乎最适合对没有特定位置的地名或名称很少的资源进行地理编码（例如某些微博）或汇总整个文档集合的地理分布。

在类似的方法基础上，DeLozier等人（2015年）使用语言建模方法对地名词典中不存在的地名进行地理定位。 使用NER方法识别可能为地名的单词及其上下文单词（例如：前后各10个单词），每个地名单词都与网格位置上的出现概率相关联，并且这些密度字段对于所有上下文术语用于标识最可能与地名相关联的网格位置。 如果地名词典中也存在地名，则此方法允许将候选位置选择为位于相应网格单元中或最靠近网格单元的位置。 后一种方法称为TopoCluster，DeLozier等人（2015年）证明，其对地名词典名称的地名解析优于在Speriosu和Baldridge中介绍的方法。

   Gritta等人（2017年）的最新论文比较了几种最先进的地名解析方法，包括TopoCluster、Edinburgh Geoparser（Grover等人，2010）、GeoTxt（Karimzadeh等人，2013）、 Yahoo！PlaceSpotter和CLAVIN。 对于使用Wikipedia的语料库（基于Wikipedia和GeoNames创建）进行地名解析，他们发现Yahoo！PlaceSpotter和Edinburgh Geoparser的性能均优于TopoCluster。   

## 7. 总结

本文讨论了识别文本中潜在位置的方法（地理解析）及其对地球上某个位置的后续编码（地理编码）。两项任务都需要使用上下文信息，以消除歧义并使其成为真正的地理引用。 我们还讨论了文档地理范围计算等相关概念。 我们注意到，尽管承诺使用基于机器学习的方法，但示例系统中大多数差异似乎是由特定领域的方法定制所致，例如：语言类型、语言性质和丰富性、地名索引和地理配准的粒度等。 因此，至少就目前而言，似乎详细的领域知识以及方法学专业知识仍然是从事地理定位过程中任何研究人员工具包中不可或缺的一部分（Leveling，2015），其重要性不可低估。